<html>
	<head>
		<link rel="stylesheet" href="resources/css/bootstrap.min.css">
		<script src="resources/js/jquery.min.js"></script>
		<link rel="stylesheet" type="text/css" href="resources/css/yellowarp.css">
		<script type="text/javascript" src="resources/js/jquery.arctext.js"></script> 
	<style>
		.box{
				position:relative;
				display:inline-block;
				border-radius: 50% ;
				color:black;
				margin:0.6%;
				text-align:center;
				font-size:16px;
				font-family:Century Gothic;
			}
                
			.music{
				margin:0.6%;
				position:relative;
				background: none;
				display:inline-block;
				border-radius: 50% ;
				color:black;
				text-align:center;
				font-family:Century Gothic;
			}
	</style>
	</head>
	<script>
        var xStart = 210, ystart = 450;
        var xEnd = 470, yEnd = 110;
        var xCurrent = xStart, yCurrent = ystart;
        var slope = 0;
        var pluckAmplitude = 20;
        var pluckInterval = null;
        var growthinterval = null;
        var ungrowInterval = null;
        var isGrown = false;
        var currentMousePos = { x: -1, y: -1 };
        var c = null;
        var ctx = null;

		$(document).bind('mousemove', function(e) {
			  mouse = {'x': e.pageX, 'y': e.pageY};
		});
			 
		 $(document).ready(function() {
                           
                           c=document.getElementById("myCanvas");
                           ctx=c.getContext("2d");
                           
                           c.width = window.innerWidth;
                           c.height = window.innerHeight;
                           
                           if (xEnd == xStart) {
                           //Vertical Line
                           
                           } else if (yEnd == ystart) {
                           //Horizontal Line
                           
                           } else {
                           //All other lines
                           slope = (yEnd - ystart)/(xEnd - xStart);
                           }
                           
                           $(document).mousemove(function(event) {
                                                 if (currentMousePos.x == -1 && currentMousePos.y == -1) {
                                                 currentMousePos.x = event.pageX;
                                                 currentMousePos.y = event.pageY;
                                                 }
                                                 
                                                 if (isGrown == true) {
                                                 if (xEnd == xStart) {
                                                 //Vertical Line
                                                 if ((event.pageX >= xStart && currentMousePos.x < xStart) || (event.pageX <= xStart && currentMousePos.x > xStart)) {
                                                 clearInterval(pluckInterval);
                                                 pluckAmplitude = 20;
                                                 pluckInterval = setInterval(pluck, 10);
                                                 }
                                                 } else if (yEnd == ystart) {
                                                 //Horizontal Line
                                                 if ((event.pageY >= ystart && currentMousePos.y < ystart) || (event.pageY <= ystart && currentMousePos.y > ystart)) {
                                                 clearInterval(pluckInterval);
                                                 pluckAmplitude = 20;
                                                 pluckInterval = setInterval(pluck, 10);
                                                 }
                                                 } else {
                                                 //All other lines
                                                 if (line_intersects(xStart, ystart, xEnd, yEnd, event.pageX, event.pageY, currentMousePos.x, currentMousePos.y) == true) {
                                                 clearInterval(pluckInterval);
                                                 pluckAmplitude = 20;
                                                 pluckInterval = setInterval(pluck, 10);
                                                 }
                                                 }
                                                 currentMousePos.x = event.pageX;
                                                 currentMousePos.y = event.pageY;
                                                 }
                                                 });
                           
                           $('#grow').on('click', function(){
                                         growthinterval = setInterval(grow, 10);
                                         });
		 mouse = {'x': 0, 'y': 0};
		 homex = 0;
		 homey = 0;
		 forcex = 0;
		 forcey = 0;
		 magnet = 500;
		 $('.box').each(function(index, el){
					$(el).data( "homex", parseInt($(el).position().left));
					$(el).data( "homey", parseInt($(el).position().top));
				});
			$('.music').each(function(index, el){
					$(el).data( "homex", parseInt($(el).position().left));
					$(el).data( "homey", parseInt($(el).position().top));
				});
			 $('.box').css('position','absolute');
			 $('.music').css('position','absolute');
			 
			 setInterval(function () {
				 $('.box').each(function(index, el){
						el = $(el);
						position = el.position();
						x0 = el.offset().left;
						y0 = el.offset().top;
						x1 = mouse.x;
						y1 = mouse.y;
						distancex = x1-x0;
						distancey = y1-y0;
						
						distance = Math.sqrt((distancex * distancex) + (distancey * distancey));
						powerx = x0 - (distancex / distance) * magnet / distance;
						powery = y0 - (distancey / distance) * magnet / distance;
						
						forcex = (forcex + (el.data('homex') - x0) / 2) / 2.1;
						forcey = (forcey + (el.data('homey') - y0) / 2) / 2.1;
						
						el.css('left', powerx + forcex-300);
						el.css('top',  powery + forcey);
						});
				 }, 15);
				 
				 setInterval(function () {
				 $('.music').each(function(index, el){
						el = $(el);
						position = el.position();
						x0 = el.offset().left;
						y0 = el.offset().top;
						x1 = mouse.x;
						y1 = mouse.y;
						distancex = x1-x0;
						distancey = y1-y0;
						
						distance = Math.sqrt((distancex * distancex) + (distancey * distancey));
						
						powerx = x0 - (distancex / distance) * magnet / distance;
						powery = y0 - (distancey / distance) * magnet / distance;
						
						forcex = (forcex + (el.data('homex') - x0) / 2) / 2.1;
						forcey = (forcey + (el.data('homey') - y0) / 2) / 2.1;
						
						
						el.css('left', powerx + forcex-300);
						el.css('top',  powery + forcey);
						});
				 }, 15);
		 
		 $('#filmCrew').arctext({radius:100});
		 $('#about').arctext({radius:80});
		 $('#photo').arctext({radius:100});
		 $('#music').arctext({radius:80});
		 $('#home').arctext({radius:80});
		 $('#services').arctext({radius:80});
		 $('#contact').arctext({radius:80});
			$('#information').hide();
			$('#logo').hide();
			$('#topLogo').hide();
			$("#topLogo").css({'margin-top': '63%', left: '20%', position:'absolute'});
		   $('#about').css('color','#FF9900');
		   $('#move').css('margin-top','16.3%');
		   $('#myCanvas').css('z-index','-999');
		   $('#myCanvas').css('position','absolute');
			$('#myCanvas').css('height','100%');
			$('#myCanvas').css('width','100%');
		   $('#move').animate({left: '-=33.5em', top: '+=10em'}, 1000,function() {
                              growthinterval = setInterval(grow, 10);
				//$('#information').show();
				$('#move').hide();
				$('#logo').show();
				$("#logo").css({top: 380, left: 60, position:'absolute'});
				//var canvas = document.getElementById('myCanvas');
				//var context = canvas.getContext('2d');
				//context.beginPath();
				//context.moveTo ($("#logo").offset().top + $("#logo").height(), $("#logo").offset().top + $("#logo").height());
				//context.moveTo (70, 70);
				//context.lineTo(50,50);
				//context.stroke();
				$('#topLogo').css('z-index','-999');
				$('#topLogo').show();
				$('#topLogo').animate({'margin-top': '6%','left': '70%'},
					{
						duration:1000,
						step: function(now){								
							//$('#myCanvas').slideDown(1000);
						},
						complete:function() {
							$('#information').fadeIn(1000);
						}
					}
				);
				$('.aboutusline').css({top: $('#topLogo').height() -25});
				var margin = parseInt($('#topLogo').css('margin-left').split("px")[0]) + (parseInt($('#topLogo').css('width').split("px")[0]) / 2 ) - 45;
				$('.aboutusline').css('margin-left',margin);
				var height = 450 - $('#topLogo').height();
				$('.aboutusline').css('height',0);
				$('.aboutusline').css({top: $('#topLogo').height() -25 + height});				
				$('.aboutusline').css('display','none');
				$('.aboutusline').animate({'height': height,'top': $('#topLogo').height() -25},400,'linear',function(){
					$('#topLogo').fadeIn(1000,function() {
						$('#information').fadeIn(1000);					
					});
				});
		   });
		   $('a').click(function(e) {
				e.preventDefault();
				 var href = $(this).attr('href');
				 if(href != 'About.html') {
					$('#information').fadeOut(1000,function(){
					$("#logo").hide();
					$("#move").show();
						/*$('#topLogo').fadeOut(1000,function(){
							$('.aboutusline').hide();
							$("#move").animate({left: '+=33.5em', top: '-=10em'},1000,function(){
								window.location.href = href;
							});
						});*/
                          xCurrent = xEnd;
                          yCurrent = yEnd;
                          ungrowInterval = setInterval(ungrow, 10);
						$('#topLogo').animate({'margin-top': '62%','left': '26%'},1000,function(){
							$('#topLogo').hide();
							$("#move").animate({left: '+=33.5em', top: '-=10em'},1000,function(){
								window.location.href = href;
							});
						});
					});
				 }
			});
                           
		});
        
        function line_intersects(p0_x, p0_y, p1_x, p1_y, p2_x, p2_y, p3_x, p3_y) {
            
            var s1_x, s1_y, s2_x, s2_y;
            s1_x = p1_x - p0_x;
            s1_y = p1_y - p0_y;
            s2_x = p3_x - p2_x;
            s2_y = p3_y - p2_y;
            
            var s, t;
            s = (-s1_y * (p0_x - p2_x) + s1_x * (p0_y - p2_y)) / (-s2_x * s1_y + s1_x * s2_y);
            t = ( s2_x * (p0_y - p2_y) - s2_y * (p0_x - p2_x)) / (-s2_x * s1_y + s1_x * s2_y);
            
            if (s >= 0 && s <= 1 && t >= 0 && t <= 1)
            {
                // Collision detected
                return true;
            }
            
            return false; // No collision
        }
    
    function pluck() {
        c.width = c.width;
        ctx.beginPath();
        ctx.moveTo(xStart, ystart);
        
        if (xEnd == xStart) {
            //Vertical Line
            ctx.bezierCurveTo(xStart, ystart, xStart + pluckAmplitude, (ystart + yEnd)/2, xEnd, yEnd);
        } else if (yEnd == ystart) {
            //Horizontal Line
            ctx.bezierCurveTo(xStart, ystart, (xStart + xEnd)/2, ystart + pluckAmplitude, xEnd, yEnd);
        } else {
            //All other lines
            ctx.bezierCurveTo(xStart, ystart, xStart + (xEnd - xStart)/2, ystart + (yEnd - ystart)/2 + pluckAmplitude, xEnd, yEnd);
        }
        
        console.log(pluckAmplitude);
        if (pluckAmplitude > 0) {
            pluckAmplitude -= 0.5;
        } else if (pluckAmplitude < 0) {
            pluckAmplitude += 0.5;
        } else {
            clearInterval(pluckInterval);
            pluckAmplitude = 20;
        }
        pluckAmplitude = pluckAmplitude*-1;
        
        ctx.strokeStyle = '#000000';
        ctx.stroke();
    }
    
    function ungrow() {
        c.width = c.width;
        ctx.beginPath();
        ctx.moveTo(xStart, ystart);
        
        console.log(xCurrent, yCurrent);
        if (xEnd == xStart) {
            //Vertical Line
            
            ctx.lineTo(xCurrent, yCurrent);
        } else if (yEnd == ystart) {
            //Horizontal Line
            
            ctx.lineTo(xCurrent, yCurrent);
        } else {
            //All other lines
            
            xCurrent = xCurrent - 5;
            yCurrent = yEnd - (xEnd - xCurrent)*slope;
            ctx.lineTo(xCurrent, yCurrent);
        }
        
        //TODO: Needs cleanup.
        if (yEnd < ystart) {
            if (yCurrent >= ystart) {
                clearInterval(ungrowInterval);
            }
        } else if (yEnd > ystart) {
            if (yCurrent <= ystart) {
                clearInterval(ungrowInterval);
            }
        } else if (xEnd < xStart) {
            if (xCurrent >= xStart) {
                clearInterval(ungrowInterval);
            }
        } else if (xEnd > xStart) {
            if (xCurrent <= xStart) {
                clearInterval(ungrowInterval);
            }
        }
        
        ctx.strokeStyle = '#000000';
        ctx.stroke();
    }
    
    function grow(){
        c.width = c.width;
        ctx.beginPath();
        ctx.moveTo(xStart, ystart);
        
        console.log(xCurrent, yCurrent);
        if (xEnd == xStart) {
            //Vertical Line
            if (yCurrent < yEnd) {
                yCurrent = yCurrent + 5;
            } else {
                yCurrent = yCurrent - 5;
            }
            xCurrent = xStart;
            ctx.lineTo(xCurrent, yCurrent);
        } else if (yEnd == ystart) {
            //Horizontal Line
            if (xCurrent < xEnd) {
                xCurrent = xCurrent + 5;
            } else {
                xCurrent = xCurrent - 5;
            }
            yCurrent = ystart;
            ctx.lineTo(xCurrent, yCurrent);
        } else {
            //All other lines
            if (xStart < xEnd) {
                xCurrent = xCurrent + 5;
                yCurrent = ystart + (xCurrent - xStart)*slope;
            } else if (xStart > xEnd) {
                xCurrent = xCurrent - 5;
                yCurrent = ystart + (xCurrent - xStart)*slope;
            }
            ctx.lineTo(xCurrent, yCurrent);
        }
        
        //TODO: Needs cleanup.
        if (yEnd < ystart) {
            if (yCurrent <= yEnd) {
                isGrown = true;
                clearInterval(growthinterval);
            }
        } else if (yEnd > ystart) {
            if (yCurrent >= yEnd) {
                isGrown = true;
                clearInterval(growthinterval);
            }
        } else if (xEnd < xStart) {
            if (xCurrent <= xEnd) {
                isGrown = true;
                clearInterval(growthinterval);
            }
        } else if (xEnd > xStart) {
            if (xCurrent >= xEnd) {
                isGrown = true;
                clearInterval(growthinterval);
            }
        }
        
        ctx.strokeStyle = '#000000';
        ctx.stroke();
    }
	</script>
	<body>
	<div id="move" style="margin-top:12.5%;position:absolute;width:100%;text-align:center;"><img  src="resources/images/logoweb.png" width="14%"/></div>
		<div class="row">
		<canvas id="myCanvas"></canvas>
		<div class="left-container" id="logo">
			<img class="left" src="resources/images/logoweb.png" width="14%" style="font-family:Century Gothic;margin-top:0%"/>
			<a href='films.html' class='deg135' style="min-width:7%;"><span id="films">Films</span></a>
			<a href='thefilmcrew.html' class='deg45' style="min-width:7%;"><span id="filmCrew">The Film Crew</span></a>
			<a href='services.html' class='deg0' style="min-width:9%;"><span id="services">Services</span></a>
			<a href='photography.html' class='deg150' style="min-width:9%;"><span id="photo">Photography</span></a>
			<a href='music.html' class='deg225' style="min-width:7.1%;"><span id="music">Music</span></a>
			<a href='contactus.html' class='deg315' style="min-width:7.5%;"><span id="contact">Contact</span></a>
			<a href='index.html' class='deg325' style="min-width:12%;"><span id="home">Home</span></a>
			<a href='About.html' class='deg335' style="min-width:9%;"><span id="about">About Us</span></a>
		</div>
			<div class="aboutusline">&nbsp;</div>
			<div class="col-md-5">
			<img src="resources/images/Aboutusphoto.png" width="35%" id="topLogo"/>
			</div>
			<div class="col-md-7" id="information" style="padding-top:20%;line-height:150%;letter-spacing:2px;">
				 <p> 
					<div class="box">From </div>
					<div class="box">watching </div>
					<div class="music">great </div>
					<div class="music">films</div>
					<div class="box">& </div>
					<div class="music">idolizing</div>
					<div class="box">great </div>
					<div class="box">filmmakers.</div><br>
					<div class="box">To </div>
					<div class="box">studying </div>
					<div class="box">film </div>
					<div class="box">passionately </div>
					<div class="box">& </div>
					<div class="box">connecting </div>
					<div class="box">with </div>
					<div class="box">the </div>
					<div class="music">fraternity.</div><br>
					<div class="box">From </div>
					<div class="music">coffee</div> 
					<div class="box">runs, </div>
					<div class="box">to </div>
					<div class="box">becoming </div>
					<div class="box">right </div>
					<div class="box">hand-men.</div><br>
					<div class="box">And </div>
					<div class="box">finally </div>
					<div class="box">pooling </div>
					<div class="box">together </div>
					<div class="box">to </div>
					<div class="music">plunge</div> 
					<div class="box">into </div>
					<div class="box">our </div>
					<div class="box">own </div>
					<div class="music">existence.</div><br>
					<div class="music">Y</div>
					<div class="box">ello </div>
					<div class="music">W</div>
					<div class="box">arp </div>
					<div class="music">Productions</div> 
					<div class="box">comes </div>
					<div class="box">fully </div>
					<div class="box">loaded,</div>
					<div class="box">with </div>
					<div class="box">a </div>
					<div class="box">talent </div>
					<div class="box">pool</div><br>
					<div class="box">of </div>
					<div class="box">young, </div>
					<div class="box">fresh, </div>
					<div class="box">creative, </div>
					<div class="box">dedicated </div>
					<div class="box">& </div>
					<div class="box">professional </div>
					<div class="music">filmmakers.</div><br>
					<div class="box">Co-Founded </div>
					<div class="box">by </div>
					<div class="music">Shaun kolah</div> 
					<div class="box">& </div>
					<div class="music"> Zaryan </div>
					<div class="music">Patel.</div><br>
					<div class="box">We </div>
					<div class="box">are </div>
					<div class="box">a </div>
					<div class="music">one-stop-shop,</div> 
					<div class="box">production-house </div>
					<div class="box">that </div>
					<div class="box">caters</div><br>
					<div class="box">to </div>
					<div class="box">all </div>
					<div class="box">your </div>
					<div class="music">media</div> 
					<div class="box">content </div>
					<div class="box">generation </div>
					<div class="music">requirements.</div>
				</p>
			</div>
		</div>	
	</body>
</html>